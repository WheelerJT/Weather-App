<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amatic+SC&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@200;400&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Edu+NSW+ACT+Foundation&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:ital,wght@0,400;1,600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="search-form-wrapper">
        <form action="/search" method="get" id="search-form">
            <input type="search" name="location-search" id="location-search" placeholder="Please Enter a City Name">
            <button type="submit" id="search-button"></button>
        </form>
    </div>
    
    <header>
        <div class="location" >
            <h1 id="location">
                Lorem, Ipsum
            </h1>
        </div>

        <div class="art-wrapper">
            <img src="./images/sunny.jpg" alt="Weather Image" id="art">
        </div>

        <div class="temperature-wrapper">
            <h1 id="temperature">12&degF</h1>
        </div>

        <div class="weather-type-wrapper">
            <h3 id="weatherType">
                Dolor
            </h3>
        </div>
    </header>

    <div id="hr"></div>

    <div class="info-wrapper">
        <table class="info-table">

            <tr>
                <td class="query">Feels Like:</td>
                <td class="spacer"></td>
                <td class="data" id="feelsLike">12&degF</td>
            </tr>

            <tr>
                <td class="query">Low:</td>
                <td class="spacer"></td>
                <td class="data" id="tempMin">10&degF</td>
            </tr>

            <tr>
                <td class="query">High:</td>
                <td class="spacer"></td>
                <td class="data" id="tempMax">18&degF</td>
            </tr>

            <tr>
                <td class="query">Wind Speed:</td>
                <td class="spacer"></td>
                <td class="data" id="windSpeed">3 mph</td>
            </tr>

            <tr>
                <td class="query">Humidity:</td>
                <td class="spacer"></td>
                <td class="data" id="humidity"> 12%</td>
            </tr>
        </table>
    </div>
    <script>
        let image = './images/';
        let time = new Date()
        let hours = time.getHours();

        if(hours < 5 || hours > 20) {
            document.body.style.background = 'linear-gradient(rgb(33, 62, 73), rgb(24, 42, 48), rgb(9, 15, 18))';
            document.getElementById('temperature').style.color = '#7cc8e6';
            document.getElementById('feelsLike').style.color = '#7cc8e6';
            document.getElementById('tempMin').style.color = '#7cc8e6';
            document.getElementById('tempMax').style.color = '#7cc8e6';
            document.getElementById('windSpeed').style.color = '#7cc8e6';
            document.getElementById('humidity').style.color = '#7cc8e6';
        }

        fetch('https://api.openweathermap.org/data/2.5/weather?q=Roseburg,us&appid=d4feaceb86e31dd85a2f7d4ae6933cee&units=imperial')
            .then(res => {
                return res.json();
            })
            .then(data => {
                console.log(data);
                document.getElementById('location').innerHTML = data.name + ', OR';
                document.getElementById('temperature').innerHTML = data.main.temp.toString().slice(0, 2) + '&degF';
                document.getElementById('weatherType').innerHTML = data.weather[0].main;
                document.getElementById('feelsLike').innerHTML = data.main.feels_like.toString().slice(0, 2) + '&degF';
                document.getElementById('tempMin').innerHTML = data.main.temp_min.toString().slice(0, 2) + '&degF';
                document.getElementById('tempMax').innerHTML = data.main.temp_max.toString().slice(0, 2) + '&degF';
                document.getElementById('windSpeed').innerHTML = (data.wind.speed).toString().slice(0,3) + ' mph';
                document.getElementById('humidity').innerHTML = data.main.humidity + '%';
                
                switch(data.weather[0].main) {
                    case 'Clear':
                        if(hours < 5 || hours > 20) {
                            image += 'night.jpg';
                        } else {
                            image += 'sunny.jpg';
                        }
                        break;
                    case 'Clouds':
                        image += 'cloudy.jpg';
                        break;
                    case 'Rain':
                        image += 'raining.jpg';
                        break;
                    case 'Thunderstorm': 
                        image += 'storm.jpg';
                        break;
                    case 'Snow': 
                        image += 'snowing.jpg';
                        break;
                    case 'Drizzle': 
                        image += 'raining.jpg';
                        break;
                    case 'Atmosphere': 
                        image += 'misty.jpg'
                        break;
                    default:
                        if(hours < 5 || hours > 20) {
                            image += 'night.jpg';
                        } else {
                            image += 'sunny.jpg';
                        }
                        break;
                }
                document.getElementById('art').setAttribute('src', image);
            })


    </script>
    
</body>
</html>